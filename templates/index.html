{% extends "base.html" %} {% block title %}Anasayfa - Codexia{% endblock %} {%
block content %}
<div class="container py-4">
  <!-- Slider -->
  <div
    id="mainCarousel"
    class="carousel slide mb-5 shadow-lg"
    data-bs-ride="carousel"
  >
    <div class="carousel-inner">
      {% for slide in slider_images %}
      <div class="carousel-item {% if loop.first %}active{% endif %}">
        <img
          src="{{ slide.url }}"
          class="d-block w-100 rounded"
          alt="{{ slide.title }}"
          style="max-height: 400px; object-fit: cover"
        />
        <div
          class="carousel-caption d-none d-md-block bg-dark bg-opacity-50 rounded p-2"
        >
          <h5>{{ slide.title }}</h5>
          <p>{{ slide.subtitle }}</p>
        </div>
      </div>
      {% endfor %}
    </div>
    <button
      class="carousel-control-prev"
      type="button"
      data-bs-target="#mainCarousel"
      data-bs-slide="prev"
    >
      <span class="carousel-control-prev-icon"></span>
    </button>
    <button
      class="carousel-control-next"
      type="button"
      data-bs-target="#mainCarousel"
      data-bs-slide="next"
    >
      <span class="carousel-control-next-icon"></span>
    </button>
  </div>

  <div class="text-center mb-5">
    <h1 class="fw-bold text-primary">Hoşgeldiniz Codexia E-Ticaret</h1>
    <p class="lead">En yeni kampanyalar, indirimler ve trend ürünler burada!</p>
  </div>

  <!-- Popüler Ürünler -->
  <section class="mb-5">
    <h3 class="fw-bold text-secondary mb-3">Popüler Ürünler</h3>
    <div class="row">
      {% for product in products[:8] %}
      <div class="col-6 col-md-4 col-lg-3 mb-4">
        <div class="card h-100 shadow-sm">
          <img
            src="{{ product.image_url or url_for('static', filename='img/no-image.png') }}"
            class="card-img-top"
            alt="{{ product.name }}"
            style="object-fit: cover; height: 200px"
          />
          <div class="card-body d-flex flex-column">
            <h6 class="card-title fw-bold">{{ product.name }}</h6>
            {% if product.campaign %}
            <p class="mb-1">
              <del class="text-muted">{{ "%.2f"|format(product.price) }} TL</del
              ><br />
              <span class="text-success fw-bold">
                {{ "%.2f"|format(product.price * (1 -
                product.campaign.discount/100)) }} TL
              </span>
            </p>
            <span class="badge bg-info mb-2"
              >{{ product.campaign.title }} -%{{ product.campaign.discount
              }}</span
            >
            {% elif product.discount and product.discount > 0 %}
            <p class="mb-1">
              <del class="text-muted">{{ "%.2f"|format(product.price) }} TL</del
              ><br />
              <span class="text-success fw-bold">
                {{ "%.2f"|format(product.price * (1 - product.discount/100)) }}
                TL
              </span>
            </p>
            <span class="badge bg-success mb-2">-%{{ product.discount }}</span>
            {% else %}
            <p class="text-muted mb-2">{{ "%.2f"|format(product.price) }} TL</p>
            {% endif %}
            <a
              href="{{ url_for('product_detail', pid=product.id) }}"
              class="btn btn-primary mt-auto w-100"
              >İncele</a
            >
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  </section>

  <!-- Flaş Ürünler -->
  <section class="mb-5">
    <h3 class="fw-bold text-warning mb-3">Flaş Ürünler</h3>
    <div class="row">
      {% for product in flash_products %}
      <div class="col-6 col-md-4 col-lg-3 mb-4">
        <div class="card h-100 border-warning shadow-sm">
          <img
            src="{{ product.image_url or url_for('static', filename='img/no-image.png') }}"
            class="card-img-top"
            alt="{{ product.name }}"
            style="object-fit: cover; height: 200px"
          />
          <div class="card-body d-flex flex-column">
            <h6 class="card-title fw-bold">{{ product.name }}</h6>
            {% if product.discount and product.discount > 0 %}
            <p class="mb-1">
              <del class="text-muted">{{ "%.2f"|format(product.price) }} TL</del
              ><br />
              <span class="text-danger fw-bold">
                {{ "%.2f"|format(product.price * (1 - product.discount/100)) }}
                TL
              </span>
            </p>
            <span class="badge bg-warning text-dark mb-2"
              >Flaş İndirim -%{{ product.discount }}</span
            >
            {% else %}
            <p class="text-muted mb-2">{{ "%.2f"|format(product.price) }} TL</p>
            {% endif %}
            <a
              href="{{ url_for('product_detail', pid=product.id) }}"
              class="btn btn-outline-warning mt-auto w-100"
              >İncele</a
            >
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  </section>

  <!-- Trendde Olanlar -->
  <section class="mb-5">
    <h3 class="fw-bold text-success mb-3">Trendde Olanlar</h3>
    <div class="row">
      {% for product in trending_products %}
      <div class="col-6 col-md-4 col-lg-3 mb-4">
        <div class="card h-100 shadow-sm">
          <img
            src="{{ product.image_url or url_for('static', filename='img/no-image.png') }}"
            class="card-img-top"
            alt="{{ product.name }}"
            style="object-fit: cover; height: 200px"
          />
          <div class="card-body d-flex flex-column">
            <h6 class="card-title fw-bold">{{ product.name }}</h6>
            <p class="text-muted mb-2">{{ "%.2f"|format(product.price) }} TL</p>
            <a
              href="{{ url_for('product_detail', pid=product.id) }}"
              class="btn btn-success mt-auto w-100"
              >İncele</a
            >
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  </section>

  <!-- Sana Özel -->
  {% if current_user.is_authenticated and user_favorites %}
  <section class="mb-5">
    <h3 class="fw-bold text-info mb-3">Sana Özel</h3>
    <div class="row">
      {% for product in user_favorites %}
      <div class="col-6 col-md-4 col-lg-3 mb-4">
        <div class="card h-100 shadow-sm">
          <img
            src="{{ product.image_url or url_for('static', filename='img/no-image.png') }}"
            class="card-img-top"
            alt="{{ product.name }}"
            style="object-fit: cover; height: 200px"
          />
          <div class="card-body d-flex flex-column">
            <h6 class="card-title fw-bold">{{ product.name }}</h6>
            <p class="text-muted mb-2">{{ "%.2f"|format(product.price) }} TL</p>
            <a
              href="{{ url_for('product_detail', pid=product.id) }}"
              class="btn btn-info mt-auto w-100"
              >İncele</a
            >
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  </section>
  {% endif %}

  <!-- Markalar -->
  <section class="mb-5">
    <h3 class="fw-bold text-dark mb-3">Markalar</h3>
    <div class="d-flex flex-wrap gap-3">
      {% for brand in brands %}
      <span class="badge bg-secondary px-3 py-2">{{ brand }}</span>
      {% endfor %}
    </div>
  </section>
</div>
{% endblock %}
