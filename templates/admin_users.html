{% extends "base.html" %} {% block title %}Kullanıcı Yönetimi - Codexia{%
endblock %} {% block content %}
<h2 class="mb-4 text-primary">
  <i class="fas fa-users me-2"></i> Kullanıcı Yönetimi
</h2>

{% if users and users|length > 0 %}
<table class="table table-striped table-hover shadow-sm">
  <thead class="table-light">
    <tr>
      <th>ID</th>
      <th>Ad Soyad</th>
      <th>Email</th>
      <th>Telefon</th>
      <th>Rol</th>
      <th>Durum</th>
      <th>İşlemler</th>
    </tr>
  </thead>
  <tbody>
    {% for user in users %}
    <tr>
      <td>{{ user.id }}</td>
      <td>{{ user.fullname }}</td>
      <td>{{ user.email }}</td>
      <td>{{ user.phone or '-' }}</td>
      <td>
        {% if user.is_admin() %}
        <span class="badge bg-danger">Admin</span>
        {% else %}
        <span class="badge bg-secondary">Üye</span>
        {% endif %}
      </td>
      <td>
        {% if user.is_active %}
        <span class="text-success">Aktif</span>
        {% else %}
        <span class="text-danger">Pasif</span>
        {% endif %}
      </td>
      <td>
        <a
          href="{{ url_for('admin_user_detail', uid=user.id) }}"
          class="btn btn-sm btn-primary"
        >
          <i class="fas fa-eye"></i> Görüntüle
        </a>
        <form
          method="POST"
          action="{{ url_for('admin_user_toggle', uid=user.id) }}"
          class="d-inline"
        >
          <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
          {% if user.is_active %}
          <button type="submit" class="btn btn-sm btn-warning">
            <i class="fas fa-ban"></i> Pasifleştir
          </button>
          {% else %}
          <button type="submit" class="btn btn-sm btn-success">
            <i class="fas fa-check"></i> Aktifleştir
          </button>
          {% endif %}
        </form>
        <form
          method="POST"
          action="{{ url_for('admin_user_delete', uid=user.id) }}"
          class="d-inline"
        >
          <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
          <button type="submit" class="btn btn-sm btn-danger">
            <i class="fas fa-trash"></i> Sil
          </button>
        </form>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% else %}
<div class="alert alert-info">Henüz kayıtlı kullanıcı bulunmamaktadır.</div>
{% endif %} {% endblock %}
